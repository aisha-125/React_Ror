{"type":"operationStart","subtype":"profile","data":{"_id":"sRjWOk3guwb1NkwV","timestamp":"2024-01-14T23:12:31.536Z","state":"queued","mode":"standard","creationDate":"2024-01-14T23:12:31.537Z","modificationDate":"2024-01-14T23:12:31.537Z","shortid":"KZySVxL","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705273951536,"id":"23r14vo4vn34d58","previousOperationId":null,"operationId":"hh257iz4uf714r4"}
{"type":"log","level":"info","message":"Render request 174 queued for execution and waiting for available worker","previousOperationId":"hh257iz4uf714r4","timestamp":1705273951536,"id":"3twf6sst86siazb"}
{"type":"operationStart","subtype":"render","name":"activities-users-main","previousOperationId":"hh257iz4uf714r4","timestamp":1705273951540,"id":"a0fcnuszgv5fw55","previousEventId":"23r14vo4vn34d58","operationId":"svdt4gc4tenfujm"}
{"type":"log","timestamp":1705273951540,"level":"info","message":"Starting rendering request 174","meta":{"rootId":"0ykaxemnua2w1d1","id":"0ykaxemnua2w1d1"},"id":"cfzp929n66ob0fz","previousOperationId":"svdt4gc4tenfujm"}
{"type":"log","timestamp":1705273951540,"level":"info","message":"Rendering template { name: activities-users-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"0ykaxemnua2w1d1","id":"0ykaxemnua2w1d1"},"id":"zafd7jj8rxe6k8z","previousOperationId":"svdt4gc4tenfujm"}
{"type":"log","timestamp":1705273951540,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"0ykaxemnua2w1d1","id":"0ykaxemnua2w1d1"},"id":"xq636kd5pcfq2z6","previousOperationId":"svdt4gc4tenfujm"}
{"type":"log","timestamp":1705273951541,"level":"debug","message":"Executing script users-script (beforeRender)","meta":{"rootId":"0ykaxemnua2w1d1","id":"0ykaxemnua2w1d1"},"id":"bxcauxjow6x53i7","previousOperationId":"svdt4gc4tenfujm"}
{"type":"log","timestamp":1705273951546,"level":"warn","message":"Error when processing render request 174\n(because) error when evaluating custom script /Stillhigher/users-script\nUnable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n\n(sandbox.js line 1:164)\n\n> 1 | const fethc = require('fetch');\n    |                                ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n\nError: Unable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n    at doRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:89:11)\n    at sandboxRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:44:14)\n    at require (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:89:30)\n    at sandbox.js:1:164","meta":{"rootId":"0ykaxemnua2w1d1","id":"0ykaxemnua2w1d1"},"id":"6dyek14ip9hrt9a","previousOperationId":"svdt4gc4tenfujm"}
{"type":"log","timestamp":1705273951546,"level":"warn","message":"Rendering request 174 finished with error in 10 ms","meta":{"rootId":"0ykaxemnua2w1d1","id":"0ykaxemnua2w1d1"},"id":"kn30sncuynwwwt3","previousOperationId":"svdt4gc4tenfujm"}
{"type":"error","timestamp":1705273951547,"statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 1:164)\n\n> 1 | const fethc = require('fetch');\n    |                                ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n","entity":{"shortid":"z0qYUNaQrV","name":"users-script","content":"const fethc = require('fetch');\n\nfunction fetchActivities() {\n    return fetch('http://localhost:4000/api/v1/activities')\n        .then(activities => {\n            console.log('Fetched activities:', activities);\n            return activities;\n        })\n        .catch(error => {\n            console.error('Error fetching activities:', error);\n            throw error;\n        });\n}\n\n\n\nasync function beforeRender(req, res) {\n    try {\n        req.data.activities = fetchActivities();\n        console.log('Activities in beforeRender:', req.data.activities);\n    } catch (error) {\n        console.error('Error fetching activities:', error);\n    }\n}\n"},"property":"content","logged":true,"previousOperationId":"svdt4gc4tenfujm","id":"wp34txkq51maje5","stack":"Error: Unable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n    at doRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:89:11)\n    at sandboxRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:44:14)\n    at require (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:89:30)\n    at sandbox.js:1:164","message":"Error when evaluating custom script /Stillhigher/users-script\nUnable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n\n(sandbox.js line 1:164)\n\n> 1 | const fethc = require('fetch');\n    |                                ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n"}
