{"type":"operationStart","subtype":"profile","data":{"_id":"UB84U2EvEgn2mxot","timestamp":"2024-01-14T23:12:22.083Z","state":"queued","mode":"standard","creationDate":"2024-01-14T23:12:22.083Z","modificationDate":"2024-01-14T23:12:22.083Z","shortid":"-3QXtCq","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705273942083,"id":"k35nu7l9g6ak9tr","previousOperationId":null,"operationId":"ueqn29dhmkyg7sh"}
{"type":"log","level":"info","message":"Render request 172 queued for execution and waiting for available worker","previousOperationId":"ueqn29dhmkyg7sh","timestamp":1705273942083,"id":"r0jrjs4so9yrtnm"}
{"type":"operationStart","subtype":"render","name":"activities-users-main","previousOperationId":"ueqn29dhmkyg7sh","timestamp":1705273942087,"id":"qruy4gvposdgx6j","previousEventId":"k35nu7l9g6ak9tr","operationId":"meirpakn2tessfi"}
{"type":"log","timestamp":1705273942087,"level":"info","message":"Starting rendering request 172","meta":{"rootId":"m1x3vsjopyzr2h4","id":"m1x3vsjopyzr2h4"},"id":"546wzkieybrbvjx","previousOperationId":"meirpakn2tessfi"}
{"type":"log","timestamp":1705273942087,"level":"info","message":"Rendering template { name: activities-users-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"m1x3vsjopyzr2h4","id":"m1x3vsjopyzr2h4"},"id":"dtmzmncnirdn3t2","previousOperationId":"meirpakn2tessfi"}
{"type":"log","timestamp":1705273942087,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"m1x3vsjopyzr2h4","id":"m1x3vsjopyzr2h4"},"id":"ishkelxb6pc5q9v","previousOperationId":"meirpakn2tessfi"}
{"type":"log","timestamp":1705273942088,"level":"debug","message":"Executing script users-script (beforeRender)","meta":{"rootId":"m1x3vsjopyzr2h4","id":"m1x3vsjopyzr2h4"},"id":"bx9vz0nv97i0ekf","previousOperationId":"meirpakn2tessfi"}
{"type":"log","timestamp":1705273942094,"level":"warn","message":"Error when processing render request 172\n(because) error when evaluating custom script /Stillhigher/users-script\nUnable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n\n(sandbox.js line 1:163)\n\n> 1 | const http = require('fetch');\n    |                               ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n\nError: Unable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n    at doRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:89:11)\n    at sandboxRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:44:14)\n    at require (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:89:30)\n    at sandbox.js:1:163","meta":{"rootId":"m1x3vsjopyzr2h4","id":"m1x3vsjopyzr2h4"},"id":"th79xxns0a1ek6i","previousOperationId":"meirpakn2tessfi"}
{"type":"log","timestamp":1705273942094,"level":"warn","message":"Rendering request 172 finished with error in 11 ms","meta":{"rootId":"m1x3vsjopyzr2h4","id":"m1x3vsjopyzr2h4"},"id":"anivls7gdictvvi","previousOperationId":"meirpakn2tessfi"}
{"type":"error","timestamp":1705273942096,"statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 1:163)\n\n> 1 | const http = require('fetch');\n    |                               ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n","entity":{"shortid":"z0qYUNaQrV","name":"users-script","content":"const http = require('fetch');\n\nfunction fetchActivities() {\n    return fetch('http://localhost:4000/api/v1/activities')\n        .then(activities => {\n            console.log('Fetched activities:', activities);\n            return activities;\n        })\n        .catch(error => {\n            console.error('Error fetching activities:', error);\n            throw error;\n        });\n}\n\n\n\nasync function beforeRender(req, res) {\n    try {\n        req.data.activities = fetchActivities();\n        console.log('Activities in beforeRender:', req.data.activities);\n    } catch (error) {\n        console.error('Error fetching activities:', error);\n    }\n}\n"},"property":"content","logged":true,"previousOperationId":"meirpakn2tessfi","id":"6rae1sx08r6izqh","stack":"Error: Unable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n    at doRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:89:11)\n    at sandboxRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:44:14)\n    at require (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:89:30)\n    at sandbox.js:1:163","message":"Error when evaluating custom script /Stillhigher/users-script\nUnable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n\n(sandbox.js line 1:163)\n\n> 1 | const http = require('fetch');\n    |                               ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n"}
