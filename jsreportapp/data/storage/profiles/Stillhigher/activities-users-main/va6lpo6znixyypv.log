{"type":"operationStart","subtype":"profile","data":{"_id":"qh1UtFDngfTDADw2","timestamp":"2024-01-14T23:32:49.803Z","state":"queued","mode":"standard","creationDate":"2024-01-14T23:32:49.803Z","modificationDate":"2024-01-14T23:32:49.803Z","shortid":"XLXOVf2","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705275169803,"id":"fl4ldonxzsa8dto","previousOperationId":null,"operationId":"61m8m6zpd9vzfku"}
{"type":"log","level":"info","message":"Render request 217 queued for execution and waiting for available worker","previousOperationId":"61m8m6zpd9vzfku","timestamp":1705275169803,"id":"brf6d6iqc06j8an"}
{"type":"operationStart","subtype":"render","name":"activities-users-main","previousOperationId":"61m8m6zpd9vzfku","timestamp":1705275169808,"id":"zgm063zom3jcfc1","previousEventId":"fl4ldonxzsa8dto","operationId":"2px1owysfybbthl"}
{"type":"log","timestamp":1705275169808,"level":"info","message":"Starting rendering request 217","meta":{"rootId":"va6lpo6znixyypv","id":"va6lpo6znixyypv"},"id":"hudyaqlbfx7ivl3","previousOperationId":"2px1owysfybbthl"}
{"type":"log","timestamp":1705275169808,"level":"info","message":"Rendering template { name: activities-users-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"va6lpo6znixyypv","id":"va6lpo6znixyypv"},"id":"p1zp0jrx78w1uuc","previousOperationId":"2px1owysfybbthl"}
{"type":"log","timestamp":1705275169808,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"va6lpo6znixyypv","id":"va6lpo6znixyypv"},"id":"7b5xw4hoetzcojz","previousOperationId":"2px1owysfybbthl"}
{"type":"log","timestamp":1705275169809,"level":"debug","message":"Executing script users-script (beforeRender)","meta":{"rootId":"va6lpo6znixyypv","id":"va6lpo6znixyypv"},"id":"fcgyzbza2xiesfj","previousOperationId":"2px1owysfybbthl"}
{"type":"log","timestamp":1705275169821,"level":"warn","message":"Error when processing render request 217\n(because) error when evaluating custom script /Stillhigher/users-script\nmodule is not defined\n\n(sandbox.js line 26:9)\n\n  24 |\n  25 |         // Exporta el helper para que esté disponible en la plantilla Handlebars\n> 26 |         module.exports = {\n     |         ^\n  27 |             helpers: {\n  28 |                 sumFields: sumFields\n  29 |             }\n\n\nReferenceError: module is not defined\n    at sandbox.js:26:9","meta":{"rootId":"va6lpo6znixyypv","id":"va6lpo6znixyypv"},"id":"dued2r4rpx2m9mi","previousOperationId":"2px1owysfybbthl"}
{"type":"log","timestamp":1705275169821,"level":"warn","message":"Rendering request 217 finished with error in 18 ms","meta":{"rootId":"va6lpo6znixyypv","id":"va6lpo6znixyypv"},"id":"s56opwf32pgim4l","previousOperationId":"2px1owysfybbthl"}
{"type":"error","timestamp":1705275169823,"statusCode":400,"weak":true,"lineNumber":26,"decoratedSuffix":"\n\n(sandbox.js line 26:9)\n\n  24 |\n  25 |         // Exporta el helper para que esté disponible en la plantilla Handlebars\n> 26 |         module.exports = {\n     |         ^\n  27 |             helpers: {\n  28 |                 sumFields: sumFields\n  29 |             }\n\n","entity":{"shortid":"z0qYUNaQrV","name":"users-script","content":"const fetch = require('node-fetch');\n\nasync function fetchActivities() {\n    const response = await fetch('http://localhost:4000/api/v1/activities');\n    if (!response.ok) {\n        throw new Error(`Network response was not ok: ${response.status} ${response.statusText}`);\n    }\n    const activities = await response.json();\n    return activities;\n}\n\nasync function beforeRender(req, res) {\n    try {\n        req.data.activities = await fetchActivities();\n        console.log('Activities in beforeRender:', req.data.activities);\n    } catch (error) {\n        console.error('Error fetching activities:', error);\n    }\n}\n\n        function sumFields(f1, f2) {\n            return f1 + f2 + 1;\n        }\n\n        // Exporta el helper para que esté disponible en la plantilla Handlebars\n        module.exports = {\n            helpers: {\n                sumFields: sumFields\n            }\n        };\n\n\n\n\n\n"},"property":"content","logged":true,"previousOperationId":"2px1owysfybbthl","id":"q2obybio9zjmyfe","stack":"ReferenceError: module is not defined\n    at sandbox.js:26:9","message":"Error when evaluating custom script /Stillhigher/users-script\nmodule is not defined\n\n(sandbox.js line 26:9)\n\n  24 |\n  25 |         // Exporta el helper para que esté disponible en la plantilla Handlebars\n> 26 |         module.exports = {\n     |         ^\n  27 |             helpers: {\n  28 |                 sumFields: sumFields\n  29 |             }\n\n"}
