{"type":"operationStart","subtype":"profile","data":{"_id":"D1cMU2d1Un5dIOJH","timestamp":"2024-01-14T23:32:50.483Z","state":"queued","mode":"standard","creationDate":"2024-01-14T23:32:50.483Z","modificationDate":"2024-01-14T23:32:50.483Z","shortid":"TRFgmGa","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705275170483,"id":"cl2nzgwgz1cpdr8","previousOperationId":null,"operationId":"hzegm7vwsgatpp5"}
{"type":"log","level":"info","message":"Render request 218 queued for execution and waiting for available worker","previousOperationId":"hzegm7vwsgatpp5","timestamp":1705275170483,"id":"ow7repjwvuwe3r3"}
{"type":"operationStart","subtype":"render","name":"activities-users-main","previousOperationId":"hzegm7vwsgatpp5","timestamp":1705275170487,"id":"v1znjxt78fbflrf","previousEventId":"cl2nzgwgz1cpdr8","operationId":"xzahdm4ygsyh2bj"}
{"type":"log","timestamp":1705275170487,"level":"info","message":"Starting rendering request 218","meta":{"rootId":"02mqkvkzb7aymbd","id":"02mqkvkzb7aymbd"},"id":"bfi7bh72okkbkmg","previousOperationId":"xzahdm4ygsyh2bj"}
{"type":"log","timestamp":1705275170487,"level":"info","message":"Rendering template { name: activities-users-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"02mqkvkzb7aymbd","id":"02mqkvkzb7aymbd"},"id":"ozwwjxo5aiqe7sa","previousOperationId":"xzahdm4ygsyh2bj"}
{"type":"log","timestamp":1705275170488,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"02mqkvkzb7aymbd","id":"02mqkvkzb7aymbd"},"id":"ffnpzb1jfoc3z04","previousOperationId":"xzahdm4ygsyh2bj"}
{"type":"log","timestamp":1705275170489,"level":"debug","message":"Executing script users-script (beforeRender)","meta":{"rootId":"02mqkvkzb7aymbd","id":"02mqkvkzb7aymbd"},"id":"gfeurd42wty8eib","previousOperationId":"xzahdm4ygsyh2bj"}
{"type":"log","timestamp":1705275170501,"level":"warn","message":"Error when processing render request 218\n(because) error when evaluating custom script /Stillhigher/users-script\nmodule is not defined\n\n(sandbox.js line 26:9)\n\n  24 |\n  25 |         // Exporta el helper para que esté disponible en la plantilla Handlebars\n> 26 |         module.exports = {\n     |         ^\n  27 |             helpers: {\n  28 |                 sumFields: sumFields\n  29 |             }\n\n\nReferenceError: module is not defined\n    at sandbox.js:26:9","meta":{"rootId":"02mqkvkzb7aymbd","id":"02mqkvkzb7aymbd"},"id":"ifftcjb9fmlbxh3","previousOperationId":"xzahdm4ygsyh2bj"}
{"type":"log","timestamp":1705275170501,"level":"warn","message":"Rendering request 218 finished with error in 18 ms","meta":{"rootId":"02mqkvkzb7aymbd","id":"02mqkvkzb7aymbd"},"id":"eq6gdu7ppywy4bt","previousOperationId":"xzahdm4ygsyh2bj"}
{"type":"error","timestamp":1705275170502,"statusCode":400,"weak":true,"lineNumber":26,"decoratedSuffix":"\n\n(sandbox.js line 26:9)\n\n  24 |\n  25 |         // Exporta el helper para que esté disponible en la plantilla Handlebars\n> 26 |         module.exports = {\n     |         ^\n  27 |             helpers: {\n  28 |                 sumFields: sumFields\n  29 |             }\n\n","entity":{"shortid":"z0qYUNaQrV","name":"users-script","content":"const fetch = require('node-fetch');\n\nasync function fetchActivities() {\n    const response = await fetch('http://localhost:4000/api/v1/activities');\n    if (!response.ok) {\n        throw new Error(`Network response was not ok: ${response.status} ${response.statusText}`);\n    }\n    const activities = await response.json();\n    return activities;\n}\n\nasync function beforeRender(req, res) {\n    try {\n        req.data.activities = await fetchActivities();\n        console.log('Activities in beforeRender:', req.data.activities);\n    } catch (error) {\n        console.error('Error fetching activities:', error);\n    }\n}\n\n        function sumFields(f1, f2) {\n            return f1 + f2 + 1;\n        }\n\n        // Exporta el helper para que esté disponible en la plantilla Handlebars\n        module.exports = {\n            helpers: {\n                sumFields: sumFields\n            }\n        };\n\n\n\n\n\n"},"property":"content","logged":true,"previousOperationId":"xzahdm4ygsyh2bj","id":"87wi69owtyxwd1n","stack":"ReferenceError: module is not defined\n    at sandbox.js:26:9","message":"Error when evaluating custom script /Stillhigher/users-script\nmodule is not defined\n\n(sandbox.js line 26:9)\n\n  24 |\n  25 |         // Exporta el helper para que esté disponible en la plantilla Handlebars\n> 26 |         module.exports = {\n     |         ^\n  27 |             helpers: {\n  28 |                 sumFields: sumFields\n  29 |             }\n\n"}
