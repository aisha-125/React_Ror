{"type":"operationStart","subtype":"profile","data":{"_id":"AxtgFwRFgV7odmc7","timestamp":"2024-01-14T23:12:23.188Z","state":"queued","mode":"standard","creationDate":"2024-01-14T23:12:23.189Z","modificationDate":"2024-01-14T23:12:23.189Z","shortid":"7gzDA_Q","$entitySet":"profiles"},"doDiffs":false,"timestamp":1705273943188,"id":"k31svnrzchmdj4a","previousOperationId":null,"operationId":"amycbaivoss7qev"}
{"type":"log","level":"info","message":"Render request 173 queued for execution and waiting for available worker","previousOperationId":"amycbaivoss7qev","timestamp":1705273943189,"id":"w9ofwsjxq63cz9c"}
{"type":"operationStart","subtype":"render","name":"activities-users-main","previousOperationId":"amycbaivoss7qev","timestamp":1705273943192,"id":"hprkzeusdlq8sqx","previousEventId":"k31svnrzchmdj4a","operationId":"puta0pa0kbm6voa"}
{"type":"log","timestamp":1705273943192,"level":"info","message":"Starting rendering request 173","meta":{"rootId":"ugm0qubb78hwour","id":"ugm0qubb78hwour"},"id":"5yxs1loruurig4l","previousOperationId":"puta0pa0kbm6voa"}
{"type":"log","timestamp":1705273943192,"level":"info","message":"Rendering template { name: activities-users-main, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"ugm0qubb78hwour","id":"ugm0qubb78hwour"},"id":"gsjj56wovwhqlsv","previousOperationId":"puta0pa0kbm6voa"}
{"type":"log","timestamp":1705273943192,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"ugm0qubb78hwour","id":"ugm0qubb78hwour"},"id":"udexufa8xu6f62u","previousOperationId":"puta0pa0kbm6voa"}
{"type":"log","timestamp":1705273943193,"level":"debug","message":"Executing script users-script (beforeRender)","meta":{"rootId":"ugm0qubb78hwour","id":"ugm0qubb78hwour"},"id":"hquvebvt5beamyr","previousOperationId":"puta0pa0kbm6voa"}
{"type":"log","timestamp":1705273943199,"level":"warn","message":"Error when processing render request 173\n(because) error when evaluating custom script /Stillhigher/users-script\nUnable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n\n(sandbox.js line 1:163)\n\n> 1 | const http = require('fetch');\n    |                               ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n\nError: Unable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n    at doRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:89:11)\n    at sandboxRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:44:14)\n    at require (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:89:30)\n    at sandbox.js:1:163","meta":{"rootId":"ugm0qubb78hwour","id":"ugm0qubb78hwour"},"id":"gkqam7ktt0p4tvd","previousOperationId":"puta0pa0kbm6voa"}
{"type":"log","timestamp":1705273943199,"level":"warn","message":"Rendering request 173 finished with error in 11 ms","meta":{"rootId":"ugm0qubb78hwour","id":"ugm0qubb78hwour"},"id":"dfro0sfc8y91a4a","previousOperationId":"puta0pa0kbm6voa"}
{"type":"error","timestamp":1705273943200,"statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 1:163)\n\n> 1 | const http = require('fetch');\n    |                               ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n","entity":{"shortid":"z0qYUNaQrV","name":"users-script","content":"const http = require('fetch');\n\nfunction fetchActivities() {\n    return fetch('http://localhost:4000/api/v1/activities')\n        .then(activities => {\n            console.log('Fetched activities:', activities);\n            return activities;\n        })\n        .catch(error => {\n            console.error('Error fetching activities:', error);\n            throw error;\n        });\n}\n\n\n\nasync function beforeRender(req, res) {\n    try {\n        req.data.activities = fetchActivities();\n        console.log('Activities in beforeRender:', req.data.activities);\n    } catch (error) {\n        console.error('Error fetching activities:', error);\n    }\n}\n"},"property":"content","logged":true,"previousOperationId":"puta0pa0kbm6voa","id":"uez40gh5ocl8eni","stack":"Error: Unable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n    at doRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:89:11)\n    at sandboxRequire (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/requireSandbox.js:44:14)\n    at require (/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:89:30)\n    at sandbox.js:1:163","message":"Error when evaluating custom script /Stillhigher/users-script\nUnable to find module fetch\nThe require calls:\nrequire('fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/fetch')\nrequire('/home/ruby/workspace/React_RoR/jsreportapp/node_modules/@jsreport/jsreport-cli/lib/fetch')\n\n\n(sandbox.js line 1:163)\n\n> 1 | const http = require('fetch');\n    |                               ^\n  2 |\n  3 | function fetchActivities() {\n  4 |     return fetch('http://localhost:4000/api/v1/activities')\n\n"}
